<!-- templates/identify_result.html -->
<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>🎵 Identification Result</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { font-family: Inter, sans-serif; background: #0b1220; color: #e6eef8; padding: 30px; }
    .card { background: #0f1724; border-radius: 12px; padding: 20px; }
    .btn-custom { background: #1db954; color: #021; padding: 8px 14px; border-radius: 8px; font-weight: 700; text-decoration: none; }
    audio { width: 100%; margin-top: 10px; }
    .meta { color: #94a3b8; }
    pre { background: #1a2433; color: #e6eef8; padding: 10px; border-radius: 8px; max-height: 300px; overflow: auto; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h2>🔎 Song Identification Result</h2>

      {% if error %}
        <p class="text-danger">❌ {{ error }}</p>
      {% else %}
        {% if result.success %}
          <h4>{{ result.title }} — <small class="meta">{{ result.artists }}</small></h4>
          {% if result.album %}<p class="meta">Album: {{ result.album }}</p>{% endif %}
          {% if result.score %}<p class="meta">Match Score: {{ result.score }}</p>{% endif %}

          <div style="margin-top:15px">
            <h5>🔊 Original Song (Playback)</h5>
            {% if original_url %}
              <audio controls>
                <source src="{{ original_url }}" type="audio/*">
                Your browser does not support the audio player.
              </audio>
            {% endif %}

            {% if result.links is defined and result.links %}
              <p style="margin-top:10px">
                {% for label, link in result.links.items() %}
                  <a class="btn-custom" href="{{ link }}" target="_blank">
                    Play on {{ label|capitalize }}
                  </a>
                {% endfor %}
              </p>
            {% endif %}
          </div>

          <h5 style="margin-top:18px">🗂 Raw Data — for Debugging</h5>
          <pre>{{ result.raw | tojson(indent=2) }}</pre>

        {% else %}
          <p class="text-warning">⚠️ Song could not be identified. Try uploading or recording a longer segment, or use another model.</p>
          <pre>{{ result.raw | tojson(indent=2) }}</pre>
        {% endif %}
      {% endif %}

      <p style="margin-top:16px">
        <a class="btn-custom" href="/">⬅️ Back to Home Page</a>
      </p>
    </div>
  </div>
</body>
</html>
